<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïò§Î™© Í≤åÏûÑ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #8B4513 0%, #A0522D 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            overflow: hidden;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 90%;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
        }

        .turn-indicator {
            font-size: 1.2em;
            font-weight: bold;
        }

        .turn-indicator.black {
            color: #2c3e50;
        }

        .turn-indicator.white {
            color: #ecf0f1;
        }

        .move-count {
            font-size: 1.1em;
        }

        .omok-board {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 0;
            width: min(660px, 90vw);
            height: min(660px, 90vw);
            margin: 0 auto 20px auto;
            background: #DEB887;
            border: 3px solid #8B4513;
            border-radius: 10px;
            padding: min(20px, 3vw);
            position: relative;
        }

        .board-cell {
            width: 100%;
            height: 100%;
            border: 1px solid #8B4513;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            background: #DEB887;
            -webkit-tap-highlight-color: transparent;
        }

        .board-cell:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .board-cell.last-move {
            background: rgba(255, 215, 0, 0.3);
        }

        .stone {
            width: 90%;
            height: 90%;
            border-radius: 50%;
            border: 2px solid #000;
            transition: all 0.3s ease;
            position: relative;
        }

        .stone.black {
            background: radial-gradient(circle at 30% 30%, #666, #000);
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .stone.white {
            background: radial-gradient(circle at 30% 30%, #fff, #ccc);
            box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .stone.winning {
            animation: winning-pulse 1s infinite;
        }

        @keyframes winning-pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0.7); }
            50% { transform: scale(1.1); box-shadow: 0 0 0 10px rgba(255, 215, 0, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-height: 44px;
            touch-action: manipulation;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .music-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            cursor: pointer;
            font-size: 1.5em;
            color: white;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .music-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Î™®Î∞îÏùº ÏµúÏ†ÅÌôî */
        @media (max-width: 768px) {
            .game-container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2em;
                margin-bottom: 15px;
            }
            
            .game-info {
                padding: 12px;
                margin-bottom: 15px;
            }
            
            .turn-indicator {
                font-size: 1.1em;
            }
            
            .move-count {
                font-size: 1em;
            }
            
            .omok-board {
                width: min(600px, 95vw);
                height: min(600px, 95vw);
                margin: 0 auto 15px auto;
            }
            
            .controls {
                gap: 10px;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.9em;
                min-height: 48px;
            }
        }

        @media (max-width: 480px) {
            .omok-board {
                width: 95vw;
                height: 95vw;
            }
        }

        .game-over {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .game-over-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .game-over h2 {
            font-size: 2em;
            margin-bottom: 20px;
        }

        .winner {
            font-size: 1.5em;
            margin-bottom: 30px;
            color: #f9ca24;
        }

        .share-section {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }

        .share-title {
            font-size: 1.2em;
            margin-bottom: 15px;
            color: #f9ca24;
        }

        .share-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            background: #2196F3;
            color: white;
        }

        .share-btn:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        .copy-success {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 1.1em;
            z-index: 2000;
            display: none;
        }

        @media (max-width: 700px) {
            .omok-board {
                width: 400px;
                height: 400px;
                padding: 15px;
            }

            .board-cell {
                width: 26px;
                height: 26px;
            }

            .stone {
                width: 22px;
                height: 22px;
            }

            .game-info {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <button class="music-toggle" onclick="toggleMusic()">üéµ</button>
    
    <div class="game-container">
        <h1>‚ö´ Ïò§Î™© Í≤åÏûÑ ‚ö™</h1>
        
        <div class="game-info">
            <div class="turn-indicator" id="turn-indicator">Ìùë Ï∞®Î°Ä</div>
            <div class="move-count">Ï∞©Ïàò: <span id="move-count">0</span></div>
        </div>
        
        <div class="omok-board" id="omok-board"></div>
        
        <div class="controls">
            <button class="btn btn-primary" onclick="resetGame()">ÏÉà Í≤åÏûÑ</button>
            <button class="btn btn-secondary" onclick="undoMove()">Î¨¥Î•¥Í∏∞</button>
            <a href="../../index.html" class="btn btn-secondary">Î©îÏù∏ÏúºÎ°ú</a>
        </div>
    </div>

    <div class="game-over" id="game-over">
        <div class="game-over-content">
            <h2>Í≤åÏûÑ Ï¢ÖÎ£å!</h2>
            <div class="winner" id="winner-text">ÌùëÏù¥ ÏäπÎ¶¨ÌñàÏäµÎãàÎã§!</div>
            <div class="controls">
                <button class="btn btn-primary" onclick="restartGame()">Îã§Ïãú ÌïòÍ∏∞</button>
                <a href="../../index.html" class="btn btn-secondary">Îã§Î•∏ Í≤åÏûÑ</a>
            </div>
            
            <div class="share-section">
                <div class="share-title">üéØ ÏπúÍµ¨Îì§ÏóêÍ≤å ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî!</div>
                <button class="share-btn" onclick="copyToClipboard()">
                    üìã Í≤∞Í≥º Î≥µÏÇ¨ÌïòÍ∏∞
                </button>
            </div>
        </div>
    </div>

    <div class="copy-success" id="copy-success">
        ÌÖçÏä§Ìä∏Í∞Ä ÌÅ¥Î¶ΩÎ≥¥ÎìúÏóê Î≥µÏÇ¨ÎêòÏóàÏäµÎãàÎã§! üìã
    </div>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="https://www.soundjay.com/misc/sounds/bell-ringing-05.wav" type="audio/wav">
    </audio>

    <script>
        // Ïò§Î™© Í≤åÏûÑ ÏÉÅÌÉú
        const BOARD_SIZE = 15;
        let board = [];
        let currentPlayer = 'black';
        let moveCount = 0;
        let moveHistory = [];
        let gameOver = false;
        let winningStones = [];
        let musicPlaying = false;

        // Î∞©Ìñ• Î∞∞Ïó¥ (Í∞ÄÎ°ú, ÏÑ∏Î°ú, ÎåÄÍ∞ÅÏÑ†)
        const directions = [
            [0, 1],   // Í∞ÄÎ°ú
            [1, 0],   // ÏÑ∏Î°ú
            [1, 1],   // Ïö∞Ìïò ÎåÄÍ∞ÅÏÑ†
            [1, -1]   // Ï¢åÌïò ÎåÄÍ∞ÅÏÑ†
        ];

        // Í∞úÎ∞úÏûê ÎèÑÍµ¨ Ï∞®Îã®
        document.addEventListener('keydown', function(e) {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && e.key === 'I') || 
                (e.ctrlKey && e.shiftKey && e.key === 'C') || (e.ctrlKey && e.key === 'U')) {
                e.preventDefault();
                return false;
            }
        });

        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });

        // ÏùåÏïÖ ÌÜ†Í∏Ä
        function toggleMusic() {
            const music = document.getElementById('bgMusic');
            if (musicPlaying) {
                music.pause();
                musicPlaying = false;
            } else {
                music.play();
                musicPlaying = true;
            }
        }

        // Í≤åÏûÑ Ï¥àÍ∏∞Ìôî
        function initGame() {
            board = Array(BOARD_SIZE).fill().map(() => Array(BOARD_SIZE).fill(''));
            currentPlayer = 'black';
            moveCount = 0;
            moveHistory = [];
            gameOver = false;
            winningStones = [];
            renderBoard();
            updateUI();
        }

        // Î≥¥Îìú Î†åÎçîÎßÅ
        function renderBoard() {
            const boardElement = document.getElementById('omok-board');
            boardElement.innerHTML = '';

            for (let row = 0; row < BOARD_SIZE; row++) {
                for (let col = 0; col < BOARD_SIZE; col++) {
                    const cell = document.createElement('div');
                    cell.className = 'board-cell';
                    cell.dataset.row = row;
                    cell.dataset.col = col;

                    // ÎßàÏßÄÎßâ Ïàò ÌëúÏãú
                    if (moveHistory.length > 0) {
                        const lastMove = moveHistory[moveHistory.length - 1];
                        if (lastMove.row === row && lastMove.col === col) {
                            cell.classList.add('last-move');
                        }
                    }

                    // Îèå ÌëúÏãú
                    if (board[row][col]) {
                        const stone = document.createElement('div');
                        stone.className = `stone ${board[row][col]}`;
                        
                        // ÏäπÎ¶¨Ìïú Îèå Ïï†ÎãàÎ©îÏù¥ÏÖò
                        if (winningStones.some(stone => stone.row === row && stone.col === col)) {
                            stone.classList.add('winning');
                        }
                        
                        cell.appendChild(stone);
                    }

                    cell.addEventListener('click', () => handleCellClick(row, col));
                    boardElement.appendChild(cell);
                }
            }
        }

        // ÏÖÄ ÌÅ¥Î¶≠ Ï≤òÎ¶¨
        function handleCellClick(row, col) {
            if (gameOver || board[row][col] !== '') return;

            // Îèå ÎÜìÍ∏∞
            board[row][col] = currentPlayer;
            moveHistory.push({ row, col, player: currentPlayer });
            moveCount++;

            // ÏäπÎ¶¨ ÌôïÏù∏
            if (checkWin(row, col, currentPlayer)) {
                gameOver = true;
                showGameOver();
            } else if (moveCount === BOARD_SIZE * BOARD_SIZE) {
                // Î¨¥ÏäπÎ∂Ä
                gameOver = true;
                showDraw();
            } else {
                // ÌÑ¥ Î≥ÄÍ≤Ω
                currentPlayer = currentPlayer === 'black' ? 'white' : 'black';
            }

            renderBoard();
            updateUI();
        }

        // ÏäπÎ¶¨ ÌôïÏù∏
        function checkWin(row, col, player) {
            for (const [dr, dc] of directions) {
                let count = 1;
                let stones = [{ row, col }];

                // Ìïú Î∞©Ìñ•ÏúºÎ°ú ÌôïÏù∏
                for (let i = 1; i < 5; i++) {
                    const newRow = row + dr * i;
                    const newCol = col + dc * i;
                    if (isValidPosition(newRow, newCol) && board[newRow][newCol] === player) {
                        count++;
                        stones.push({ row: newRow, col: newCol });
                    } else {
                        break;
                    }
                }

                // Î∞òÎåÄ Î∞©Ìñ•ÏúºÎ°ú ÌôïÏù∏
                for (let i = 1; i < 5; i++) {
                    const newRow = row - dr * i;
                    const newCol = col - dc * i;
                    if (isValidPosition(newRow, newCol) && board[newRow][newCol] === player) {
                        count++;
                        stones.push({ row: newRow, col: newCol });
                    } else {
                        break;
                    }
                }

                if (count >= 5) {
                    winningStones = stones;
                    return true;
                }
            }
            return false;
        }

        // ÏúÑÏπò Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
        function isValidPosition(row, col) {
            return row >= 0 && row < BOARD_SIZE && col >= 0 && col < BOARD_SIZE;
        }

        // UI ÏóÖÎç∞Ïù¥Ìä∏
        function updateUI() {
            const turnIndicator = document.getElementById('turn-indicator');
            const moveCountElement = document.getElementById('move-count');
            
            turnIndicator.textContent = currentPlayer === 'black' ? 'Ìùë Ï∞®Î°Ä' : 'Î∞± Ï∞®Î°Ä';
            turnIndicator.className = `turn-indicator ${currentPlayer}`;
            moveCountElement.textContent = moveCount;
        }

        // Í≤åÏûÑ Ïû¨ÏãúÏûë
        function resetGame() {
            initGame();
        }

        // Î¨¥Î•¥Í∏∞
        function undoMove() {
            if (moveHistory.length > 0 && !gameOver) {
                const lastMove = moveHistory.pop();
                board[lastMove.row][lastMove.col] = '';
                moveCount--;
                currentPlayer = lastMove.player;
                gameOver = false;
                winningStones = [];
                
                renderBoard();
                updateUI();
            }
        }

        // Í≤åÏûÑ Ïò§Î≤Ñ ÌëúÏãú
        function showGameOver() {
            const winner = currentPlayer === 'black' ? 'Ìùë' : 'Î∞±';
            document.getElementById('winner-text').textContent = `${winner}Ïù¥ ÏäπÎ¶¨ÌñàÏäµÎãàÎã§!`;
            document.getElementById('game-over').style.display = 'flex';
        }

        // Î¨¥ÏäπÎ∂Ä ÌëúÏãú
        function showDraw() {
            document.getElementById('winner-text').textContent = 'Î¨¥ÏäπÎ∂ÄÏûÖÎãàÎã§!';
            document.getElementById('game-over').style.display = 'flex';
        }

        // Í≤åÏûÑ Ïû¨ÏãúÏûë
        function restartGame() {
            document.getElementById('game-over').style.display = 'none';
            initGame();
        }

        // Í≥µÏú† ÌÖçÏä§Ìä∏ ÏÉùÏÑ±
        function generateShareText() {
            const winner = document.getElementById('winner-text').textContent;
            const moveCount = document.getElementById('move-count').textContent;
            
            return `‚ö´ Ïò§Î™© Í≤åÏûÑ Í≤∞Í≥º!\n\n` +
                   `üèÜ ${winner}\n` +
                   `üìä Ï¥ù Ï∞©Ïàò: ${moveCount}Ìöå\n\n` +
                   `üí™ ÎÑàÎèÑ ÎèÑÏ†ÑÌï¥Î¥ê! Ï†ÑÎûµÏ†Å ÏÇ¨Í≥†Î°ú 5Î™©ÏùÑ ÏôÑÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî!\n\n` +
                   `üéÆ Í≤åÏûÑ ÎßÅÌÅ¨: ${window.location.origin}${window.location.pathname.replace('/omok/index.html', '')}/index.html`;
        }

        // ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨
        function copyToClipboard() {
            const shareText = generateShareText();
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(shareText).then(() => {
                    showCopySuccess();
                }).catch(err => {
                    fallbackCopyTextToClipboard(shareText);
                });
            } else {
                fallbackCopyTextToClipboard(shareText);
            }
        }

        // ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Ìè¥Î∞± (Íµ¨Ìòï Î∏åÎùºÏö∞Ï†Ä ÏßÄÏõê)
        function fallbackCopyTextToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showCopySuccess();
            } catch (err) {
                console.error('ÌÅ¥Î¶ΩÎ≥¥Îìú Î≥µÏÇ¨ Ïã§Ìå®:', err);
            }
            
            document.body.removeChild(textArea);
        }

        // Î≥µÏÇ¨ ÏÑ±Í≥µ Î©îÏãúÏßÄ ÌëúÏãú
        function showCopySuccess() {
            const copySuccess = document.getElementById('copy-success');
            copySuccess.style.display = 'block';
            setTimeout(() => {
                copySuccess.style.display = 'none';
            }, 2000);
        }

        // Í≤åÏûÑ ÏãúÏûë
        initGame();
    </script>
</body>
</html> 